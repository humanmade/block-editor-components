!function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("@wordpress/api-fetch"),require("@wordpress/block-editor"),require("@wordpress/blocks"),require("@wordpress/components"),require("@wordpress/data"),require("@wordpress/dom"),require("@wordpress/element"),require("@wordpress/html-entities"),require("@wordpress/i18n"),require("@wordpress/url"),require("react")):"function"===typeof define&&define.amd?define("@humanmade/block-editor-components",["wp.apiFetch","wp.blockEditor","wp.blocks","wp.components","wp.data","wp.dom","wp.element","wp.htmlEntities","wp.i18n","wp.url","React"],t):"object"===typeof exports?exports["@humanmade/block-editor-components"]=t(require("@wordpress/api-fetch"),require("@wordpress/block-editor"),require("@wordpress/blocks"),require("@wordpress/components"),require("@wordpress/data"),require("@wordpress/dom"),require("@wordpress/element"),require("@wordpress/html-entities"),require("@wordpress/i18n"),require("@wordpress/url"),require("react")):e["@humanmade/block-editor-components"]=t(e["wp.apiFetch"],e["wp.blockEditor"],e["wp.blocks"],e["wp.components"],e["wp.data"],e["wp.dom"],e["wp.element"],e["wp.htmlEntities"],e["wp.i18n"],e["wp.url"],e.React)}(self,((e,t,n,o,r,l,i,c,a,s,u)=>(()=>{"use strict";var d={167:t=>{t.exports=e},221:e=>{e.exports=t},2:e=>{e.exports=n},390:e=>{e.exports=o},866:e=>{e.exports=r},533:e=>{e.exports=l},227:e=>{e.exports=i},632:e=>{e.exports=c},914:e=>{e.exports=a},55:e=>{e.exports=s},639:e=>{e.exports=u}},p={};function m(e){var t=p[e];if(void 0!==t)return t.exports;var n=p[e]={exports:{}};return d[e](n,n.exports,m),n.exports}m.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return m.d(t,{a:t}),t},m.d=(e,t)=>{for(var n in t)m.o(t,n)&&!m.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},m.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),m.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var v={};return(()=>{m.r(v),m.d(v,{ConditionalComponent:()=>n,FetchAllTermSelectControl:()=>p,FileControls:()=>b,ImageControl:()=>y,LinkToolbar:()=>S,PlainTextWithLimit:()=>_,PostTitleControl:()=>C,PostTypeCheck:()=>T,RichTextWithLimit:()=>B,createOptionFromPost:()=>V,createOptionFromTerm:()=>Q,createOptionsFromPosts:()=>z,createOptionsFromPostsWithHierarchy:()=>G,createOptionsFromTerms:()=>J,createOptionsFromTermsWithHierarchy:()=>K,findBlockByName:()=>j,findInvalidBlock:()=>D,findInvalidBlocks:()=>L,findValidBlock:()=>$,findValidBlocks:()=>U,getImageDataForSize:()=>W,useActiveBlockStyle:()=>N,useBlockStyles:()=>P,useDisallowedBlocks:()=>O,useMeta:()=>F,useRenderAppenderWithBlockLimit:()=>A,useSelectBlock:()=>I,useSetAttribute:()=>R,withActiveVariation:()=>Y});var e=m(227),t=m(639);function n(t){const{children:n=null,ComponentFalse:o=(()=>null),ComponentTrue:r=(()=>n),predicate:l,...i}=t,c=l(i)?r:o;return(0,e.createElement)(c,i)}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o.apply(this,arguments)}var r=m(167),l=m.n(r),i=m(390),c=m(866),a=m(914),s=m(55);const u={label:"",value:""},d={disabled:!0,label:(0,a.__)("No items found!","block-editor-components"),value:""};const p=function(n){const{defaultOption:r=u,fallbackOption:p=d,taxonomy:m,...v}=n,[f,b]=(0,t.useState)(),[h,k]=(0,t.useState)(),g=(0,c.useSelect)((e=>{var t;return null===(t=e("core").getTaxonomy(m))||void 0===t?void 0:t.rest_base}),[m]);return(0,t.useEffect)((()=>{g&&(async()=>{try{const e=await l()({path:(0,s.addQueryArgs)(`/wp/v2/${g}`,{_fields:"id,name",context:"view",per_page:-1})});if(null===e||void 0===e||!e.length)return void k(p?[p]:[]);k([...r?[r]:[],...J(e)])}catch(f){var e;b(null!==(e=f.message)&&void 0!==e?e:(0,a.__)("Unknown error.","block-editor-components"))}})()}),[g,r,p]),f?(0,e.createElement)(i.Notice,{isDismissible:!1,status:"error"},(0,e.createElement)("p",null,f)):h?(0,e.createElement)(i.SelectControl,o({},v,{options:h})):(0,e.createElement)(i.Spinner,null)};var f=m(221);function b(t){const{value:n,onChange:r,...l}=t;return(0,e.createElement)(f.MediaUploadCheck,null,(0,e.createElement)(f.MediaUpload,o({title:(0,a.__)("Select or Upload File","block-editor-components")},l,{multiple:!1,render:t=>{let{open:o}=t;return(0,e.createElement)(i.ToolbarGroup,null,(0,e.createElement)(i.ToolbarButton,{icon:"admin-links",label:n?(0,a.__)("Edit file","block-editor-components"):(0,a.__)("Select file","block-editor-components"),onClick:o}),n&&(0,e.createElement)(i.ToolbarButton,{icon:"editor-unlink",label:(0,a.__)("Deselect file","block-editor-components"),onClick:()=>r(null)}))},value:n,onSelect:r})))}const h=["image"],k=(0,a.__)("Select image","block-editor-components"),g=(0,a.__)("Select Image","block-editor-components"),w=(0,a.__)("Remove image","block-editor-components");function y(t){const{buttonText:n=k,className:o,help:r,id:l,label:c,modalTitle:a=g,removeButtonText:s=w,value:u,onChange:d}=t;return(0,e.createElement)(i.BaseControl,{className:`${o} ${u?"has-image":""}`.trim(),help:r,id:l,label:c},(0,e.createElement)(f.MediaUploadCheck,{fallback:()=>u&&(0,e.createElement)("img",{alt:"",src:u})},(0,e.createElement)(f.MediaUpload,{allowedTypes:h,render:t=>{let{open:o}=t;return(0,e.createElement)(i.Button,{onClick:o},u?(0,e.createElement)("img",{alt:"",src:u}):n)},title:a,onSelect:d})),u&&(0,e.createElement)(i.Button,{isDestructive:!0,onClick:()=>d(null)},s))}function S(n){const{onChange:o,opensInNewTab:r,url:l}=n,[c,s]=(0,t.useState)(!1),u=(0,t.useMemo)((()=>[{icon:"admin-links",title:(0,a.__)("Link","block-editor-components"),isActive:(null===l||void 0===l?void 0:l.length)>0,onClick:()=>s(!c)}]),[s,c,l]),d=(0,t.useMemo)((()=>({url:l,opensInNewTab:r})),[r,l]);return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i.Toolbar,{controls:u}),c&&(0,e.createElement)(i.Popover,null,(0,e.createElement)(f.__experimentalLinkControl,{forceIsEditingLink:c,opensInNewTab:r,value:d,onChange:o})))}function _(n){var r;const{className:l,limit:i=0,onChange:c,...a}=n,[s,u]=(0,t.useState)(i&&(null===(r=n.value)||void 0===r?void 0:r.length)>i);return(0,e.createElement)(f.PlainText,o({className:`${l} limit-text ${s?"invalid":""}`.trim(),onChange:e=>{i&&e.length>i?s||u(!0):(s&&u(!1),c(e))}},a))}const E=/[\r\n]+/g;function C(n){const{editPost:r}=(0,c.useDispatch)("core/editor"),l=(0,c.useSelect)((e=>e("core/editor").getEditedPostAttribute("title")),[]),i=(0,t.useCallback)((e=>r({title:e.replace(E," ")})),[r]);return(0,e.createElement)(f.RichText,o({},n,{allowedFormats:[],value:l,onChange:i}))}function T(e){var t;const{postType:n}=e;return(0,c.useSelect)((e=>e("core/editor").getCurrentPostType()),[])===n?e.children:null!==(t=e.fallback)&&void 0!==t?t:null}var x=m(533);function B(n){var r;const{className:l,limit:i=0,onChange:c,...a}=n,s=(0,t.useRef)(),[u,d]=(0,t.useState)(i&&(null===(r=n.value)||void 0===r?void 0:r.length)>i),[p,m]=(0,t.useState)(!1);return(0,e.createElement)(f.RichText,o({ref:s,className:`${l} limit-text ${u?"invalid":""}`.trim(),onChange:e=>{if(i&&(0,x.__unstableStripHTML)(e).length>i)return m(!1),s.current.innerHTML=n.value,(e=>{const t=document.createRange();t.selectNodeContents(e),t.collapse(!1);const n=window.getSelection();n.removeAllRanges(),n.addRange(t)})(s.current),void(u||d(!0));p&&u&&d(!1),m(!0),c(e)}},a))}const q=/^is-style-/;function N(e){const{blockName:n,className:o}=(0,c.useSelect)((t=>{var n,o,r;const l=t("core/editor").getBlock(e);return{blockName:null!==(n=null===l||void 0===l?void 0:l.name)&&void 0!==n?n:"",className:null!==(o=null===l||void 0===l||null===(r=l.attributes)||void 0===r?void 0:r.className)&&void 0!==o?o:""}}),[e]),{blockStyles:r,defaultStyle:l}=P(n),i=(0,t.useMemo)((()=>r.map((e=>{let{name:t}=e;return t}))),[r]),a=(0,t.useMemo)((()=>function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().replace(/\s+/," ").split(" ").map((e=>q.test(e)?e.replace(q,""):"")).filter(Boolean)}(o)),[o]);return(0,t.useMemo)((()=>{var e;return null!==(e=a.find((e=>i.includes(e))))&&void 0!==e?e:l}),[i,a,l])}function P(e){const n=(0,c.useSelect)((t=>t("core/blocks").getBlockStyles(e)),[e]);return(0,t.useMemo)((()=>{var e,t;return{blockStyles:n,defaultStyle:null!==(e=null===(t=n.find((e=>{let{isDefault:t}=e;return t})))||void 0===t?void 0:t.name)&&void 0!==e?e:""}}),[n])}var M=m(2);function O(e){return(0,t.useMemo)((()=>{const t=(0,M.getBlockTypes)();return null!==t&&void 0!==t&&t.length?t.filter((t=>{let{name:n,parent:o}=t;return!o&&!e.includes(n)})).map((e=>{let{name:t}=e;return t})):[]}),[e])}function F(e,n){var o;const{editPost:r}=(0,c.useDispatch)("core/editor"),l=(0,c.useSelect)((e=>e("core/editor").getEditedPostAttribute("meta"))),i=(0,t.useCallback)((t=>r({meta:{[e]:t}})),[r,e]);return[null!==(o=null===l||void 0===l?void 0:l[e])&&void 0!==o?o:n,i]}function A(e,t,n){return(0,c.useSelect)((o=>{const{innerBlocks:r}=o("core/block-editor").getBlock(e);return(null===r||void 0===r?void 0:r.length)<t&&n}),[])}function I(){const{selectBlock:e}=(0,c.useDispatch)("core/block-editor");return(0,t.useCallback)((t=>{const n=document.getElementById(`block-${t}`);n&&(e(t),setTimeout((()=>n.scrollIntoView({behavior:"smooth"})),200))}),[e])}function R(e,n,o){return(0,t.useCallback)((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return n({[e]:t})}),[e,o,n])}function j(e){const{getBlocks:t}=(0,c.select)("core/block-editor");return t().find((t=>{let{name:n}=t;return n===e}))}function D(e,t){return e.find((e=>!t(e)))}function L(e,t){return e.filter((e=>!t(e)))}function $(e,t){return e.find((e=>t(e)))}function U(e,t){return e.filter((e=>t(e)))}function W(e,t){var n,o;const r=null!==(n=null===e||void 0===e?void 0:e.sizes)&&void 0!==n?n:null===e||void 0===e||null===(o=e.media_details)||void 0===o?void 0:o.sizes,l=null===r||void 0===r?void 0:r[t];return l?{src:l.url||l.source_url,width:l.width,height:l.height}:null}var H=m(632);function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{id:n,title:o}=e;return{label:t+(0,H.decodeEntities)(o.rendered||(0,a.sprintf)((0,a.__)("#%d (no title)","block-editor-components"),n)),value:n}}function z(e){return e.map((e=>V(e)))}function G(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((e=>{let{children:n=[],...o}=e;return[V(o,"\u2014 ".repeat(t)),...G(n,t+1)]})).flat()}function Q(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const{id:n,name:o}=e;return{label:t+(0,H.decodeEntities)(o||(0,a.sprintf)((0,a.__)("#%d (no name)","block-editor-components"),n)),value:n}}function J(e){return e.map((e=>Q(e)))}function K(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((e=>{let{children:n=[],...o}=e;return[Q(o,"\u2014 ".repeat(t)),...K(n,t+1)]})).flat()}function X(e){return(t,n)=>e.every((e=>t[e]===n[e]))}function Y(e){var t;if(null!==(t=e.variations)&&void 0!==t&&t.length){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];const t=X(o);e.variations=e.variations.map((e=>(e.isActive=t,e)))}return e}})(),v})()));